function WMPlayer(t){var e,a=this;this.currentScript=document.currentScript||(e=document.getElementsByTagName("script"))[e.length-1],this.parentNode=(this.currentScript[this.currentScript.length-1]||this.currentScript).parentNode,this.container=document.createElement("div"),void 0!==this.container.classList?(this.container.classList.add("wmplayer"),this.container.classList.add("default")):this.container.className+=" wmplayer default";var i=document.createElement("div");void 0!==i.classList?i.classList.add("wmplayer-body"):i.className+=" wmplayer-body",this.container.appendChild(i);var s=document.createElement("div");s.className+="wmplayer-media",this.container.appendChild(s),(r=document.createElement("div")).className+="wmplayer-yt",s.appendChild(r),s.setAttribute("style","width: 0; height: 0; overflow: hidden; opacity: 0;");var n=!1;if(void 0!==t&&void 0!==t.playlistDoubleClickSelect&&(n=t.playlistDoubleClickSelect),this.started=!1,this.model=new this._Model,this.view=new this._View({playlist:"wmp-playlist",playButton:"wmp-play",stopButton:"wmp-stop",fastForwardButton:"wmp-fast-forward",rewindButton:"wmp-rewind",progressBar:"wmp-progress-bar",volumeBar:"wmp-volume-bar",muteButton:"wmp-mute",currentTrackTime:"wmp-current-track-time",currentTrackDuration:"wmp-current-track-duration",currentTrackTitle:"wmp-current-track-title",container:this.container,playlistDoubleClickSelect:n}),this.view.setTemplate('<div class="wmp-panel"><div class="wmp-current-track"><span class="wmp-current-track-title"></span><span class="wmp-timer"><span class="wmp-current-track-time">0:00</span><span class="wmp-current-track-duration">N/A</span></span></div><div class="wmp-controls"><div class="wmp-play wmp-button"><svg class="wmp-button-play" width="18" height="18"><polygon class="wmp-symbol-play" points="2,2 16,9 2,16"/><g class="wmp-symbol-pause"><rect x="2" y="2" width="4" height="14" /><rect x="11" y="2" width="4" height="14" /><rect x="2" y="2" width="14" height="14" fill="transparent" stroke="transparent"/></g></svg></div><div class="wmp-stop wmp-button"><svg class="wmp-button-stop" width="18" height="18"><rect class="wmp-symbol-stop" x="2" y="2" width="14" height="14"/></svg></div><div class="wmp-rewind wmp-button"><svg class="wmp-button-rewind" width="18" height="18"><polygon class="wmp-symbol-rewind" points="2,9 9,2 9,9 16,2 16,16 9,9 9,16"/></svg></div><div class="wmp-fast-forward wmp-button"><svg class="wmp-button-fast-forward" width="18" height="18"><polygon class="wmp-symbol-fast-forward" points="2,2 9,9 9,2 16,9 9,16 9,8 2,16"/></svg></div></div><div class="wmp-volume-bar-container"><div class="wmp-button wmp-mute"><svg width="18" height="18"><g class="wmp-button-volume"><polygon points="2,6 5,6 10,2 10,16 5,12 2,12 " /><g class="wmp-symbol-muted"><path d="M12,4 Q18,9 12,14" fill="transparent" /><path d="M12,7 Q14,9 12,11" fill="transparent" /></g></g></svg></div><div class="wmp-volume-bar"></div></div><div class="wmp-progress-bar-container"><div class="wmp-progress-bar"></div></div></div><div class="wmp-playlist-container"><div class="wmp-playlist"></div><div class="wmp-footer">Powered by: <a href="https://wiserim.github.io/WMPlayer" target="_blank" rel="noopener noreferrer">WMPlayer</a></div></div>'),this.view.setPlaylistPattern('<div class="$status"><span>$index.</span><span>$title</span><span>$duration</span></div>'),void 0!==t)if("string"==typeof t||t instanceof String||void 0!==t.nodeType&&1===t.nodeType||window.jQuery&&t instanceof jQuery)this.parent(t);else{if(void 0!==t.parent&&this.parent(t.parent,t.parentAsTemplate),void 0!==t.template&&this.template(t.template),void 0!==t.theme&&this.theme(t.theme),void 0!==t.playlistPattern&&this.playlistPattern(t.playlistPattern),void 0!==t.controls&&this.controls(t.controls),void 0!==t.autoplay&&this.autoplay(t.autoplay),void 0!==t.loop&&this.loop(t.loop),void 0!==t.volume&&this.volume(t.volume),void 0!==t.mute&&this.mute(t.mute),void 0!==t.YTApiKey&&this.model.setYTApiKey(t.YTApiKey),void 0!==t.YTAutoload&&t.YTAutoload&&0==document.querySelectorAll('script[src="https://www.youtube.com/iframe_api"]').length){var r;(r=document.createElement("script")).src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}void 0!==t.playlist&&t.playlist.forEach(function(t){a.addTrack(t.url,t.title,t.duration)}),void 0!==t.showPlaylist&&this.showPlaylist(t.showPlaylist),!1!==t.start&&this.start()}return this.model.audioTrackAdded.attach(function(){if(a.started){var t=a.model.getPlaylist(),e=a.model.getCurrentTrackIndex(),i=a.model.getCurrentTrackTitle(),s=a.model.getCurrentTrackDuration();a.view.renderPlaylist(t,e),a.view.setCurrentTrackData(i,s)}}),this.model.audioTrackRemoved.attach(function(){if(a.started){var t=a.model.getPlaylist(),e=a.model.getCurrentTrackIndex();a.view.renderPlaylist(t,e)}}),this.model.currentTrackChanged.attach(function(){if(a.started){var t=a.model.getPlaylist(),e=a.model.getCurrentTrackIndex(),i=a.model.getCurrentTrackTitle(),s=a.model.getCurrentTrackDuration();a.view.renderPlaylist(t,e),a.view.setCurrentTrackData(i,s)}}),this.model.volumeChanged.attach(function(){a.started&&(a.view.setVolumeBar(a.model.getVolume()),a.model.getMute()?a.view.addContainerClass("muted"):a.view.removeContainerClass("muted"))}),this.model.audioTrackPlaying.attach(function(){a.view.removeContainerClass("paused"),a.view.addContainerClass("playing")}),this.model.audioTrackPaused.attach(function(){a.view.removeContainerClass("playing"),a.view.addContainerClass("paused")}),this.model.audioTrackStopped.attach(function(){a.view.removeContainerClass("playing"),a.view.removeContainerClass("paused")}),this.model.audioTrackEnded.attach(function(){a.model.nextTrack()&&!a.model.getLoop()?a.model.stop():a.model.play()}),this.model.durationChanged.attach(function(){var t=a.model.getCurrentTime(),e=a.model.getCurrentTrackDuration();a.view.setProgressBar(t,e),a.view.setCurrentTime(t)}),this.model.audioTrackError.attach(function(){a.model.setCurrentTrackError(),a.nextTrack()}),this.view.playButtonClicked.attach(function(){a.model.playing?a.model.pause():a.model.play()}),this.view.stopButtonClicked.attach(function(){a.model.stop()}),this.view.fastForwardButtonPressed.attach(function(){setTimeout(function(){a.view.mousedownFlag?a.mouseDown=setInterval(function(){a.view.mousedownFlag?a.model.fastForward():(clearInterval(a.mouseDown),a.mouseDown=-1)},500):a.nextTrack()},200)}),this.view.rewindButtonPressed.attach(function(){setTimeout(function(){a.view.mousedownFlag?a.mouseDown=setInterval(function(){a.view.mousedownFlag?a.model.rewind():(clearInterval(a.mouseDown),a.mouseDown=-1)},500):a.previousTrack()},200)}),this.view.progressBarClicked.attach(function(t,e){var i=a.model.getCurrentTrackDuration(),s=Math.floor(e.offsetX/e.width*i);a.model.setTime(s)}),this.view.volumeBarClicked.attach(function(t,e){var i=e.offsetX/e.width;a.model.setVolume(i)}),this.view.muteButtonClicked.attach(function(t,e){a.model.setMute()}),this.view.playlistElementDoubleClicked.attach(function(t,e){a.model.setAudioTrack(e.trackId),a.model.play()}),this.view.templateModified.attach(function(){if(a.started){var t=a.model.getCurrentTrackTitle(),e=a.model.getCurrentTrackDuration(),i=a.model.getPlaylist(),s=a.model.getCurrentTrackIndex();a.view.renderPlayer(),a.view.setCurrentTrackData(t,e),a.view.renderPlaylist(i,s)}}),this.view.playlistPatternModified.attach(function(){if(a.started){var t=a.model.getPlaylist(),e=a.model.getCurrentTrackIndex();a.view.renderPlaylist(t,e)}}),this}window.jQuery&&($.fn.WMPlayer=function(a){var n=$.makeArray(arguments).slice(1);return this.each(function(){var t=$.data(this,"wmplayer");if(t)if(t[a]){if(t[a].apply(t,n),"parent"==a&&0<a.length){var e=n[0];0<e.length&&(e=e[0]),$.removeData(this,"wmplayer"),void 0!==$.data(e,"wmplayer")&&$.data(e,"wmplayer").destroy(),$.data(e,"wmplayer",t)}}else $.error("Method "+a+" does not exist on WMPlayer");else if("string"!=typeof a){var i=a;void 0===i?i={parent:this}:void 0===i.parent&&(i.parent=this);var s=new WMPlayer(i);return $.data(this,"wmplayer",s),s}})}),WMPlayer.prototype={addTrack:function(t,e,i){return void 0===e&&(e="N/A"),void 0===i&&(i="N/A"),this.model.addAudioTrack(t,e,i),this},removeTrack:function(t){return this.model.delAudioTrack(t),this},track:function(t){return void 0===t&&(t=0),this.model.setAudioTrack(t),this.started&&this.model.play(),this},nextTrack:function(){return this.model.nextTrack()&&!this.model.getLoop()?this.model.stop():this.model.playing&&this.model.play(),this},previousTrack:function(){return this.model.previousTrack(),this.model.playing&&this.model.play(),this},volume:function(t){return this.model.setVolume(t),this},mute:function(t){return this.model.setMute(t),this},template:function(t){return void 0===t&&(t=!1),0<t.length&&(t=t[0]),this.view.setTemplate(t),this},playlistPattern:function(t){return void 0!==t&&this.view.setPlaylistPattern(t),this},parent:function(t,e){var i;return void 0===t&&(t=(document.currentScript||(i=document.getElementsByTagName("script"),i[i.length-1])).parentNode),("string"==typeof t||t instanceof String)&&(t=document.querySelector(t)),null===t?console.log("DOM element not found."):(0<t.length&&(t=t[0]),this.parentNode=t,1==e&&(this.view.setTemplate(t.innerHTML),t.innerHTML=""),this.started&&this.parentNode.appendChild(this.container)),this},loop:function(t){return this.model.setLoop(t),this},autoplay:function(t){return this.model.setAutoplay(t),this},controls:function(t){return this.view.setControls(t),this},showPlaylist:function(t){return this.view.setShowPlaylist(t),this},theme:function(t){return this.view.setPlayerClass(t),this},destroy:function(){return this.container.parentNode==this.parentNode&&this.parentNode.removeChild(this.container),this.started=!1,this},start:function(){if(!this.started){this.started=!0,this.parentNode.appendChild(this.container);var t=this.container.querySelector(".wmplayer-media");t.appendChild(this.model.audio);var e=t.querySelector(".wmplayer-yt");e.id="wmplayer-yt-"+document.querySelectorAll(".wmplayer .wmplayer-yt").length,this.model.YTIframeId=e.id;var i=this.model.getCurrentTrackTitle(),s=this.model.getCurrentTrackDuration(),a=this.model.getPlaylist(),n=this.model.getCurrentTrackIndex(),r=this.model.getVolume(),o=this.model.getMute(),l=this.model.getAutoplay();this.view.renderPlayer(),this.view.setProgressBar(),this.view.setVolumeBar(r),o&&this.view.addContainerClass("muted"),this.view.setCurrentTrackData(i,s),this.view.renderPlaylist(a,n),l?this.model.play():this.view.addContainerClass("paused")}return this}},WMPlayer.prototype._Event=function(t){this.sender=t,this.listeners=[]},WMPlayer.prototype._Event.prototype={attach:function(t){this.listeners.push(t)},notify:function(t){for(var e=0;e<this.listeners.length;e++)this.listeners[e](this.sender,t)}},WMPlayer.prototype._Model=function(){var t=this,e=WMPlayer.prototype._Event;this.audio=new Audio,this.YTApiKey="",this.YTIframeId="",this.YTIframe=!1,this.playlist=[],this.currentTrackIndex=null,this.currentTrackType="",this.loop=!1,this.autoplay=!1,this.timeChangeRate=5,this.volume=1,this.mute=!1,this.canPause=!0,this.playing=!1,this.YTReady=!1,this.YTState=-1,this.YTQuene=!1,this.YTCTInterval=-1,this.audioTrackAdded=new e(this),this.audioTrackRemoved=new e(this),this.currentTrackChanged=new e(this),this.audioTrackPlaying=new e(this),this.audioTrackPaused=new e(this),this.audioTrackStopped=new e(this),this.audioTrackEnded=new e(this),this.audioTrackError=new e(this),this.durationChanged=new e(this),this.volumeChanged=new e(this),this.volumeChanged=new e(this),this.audio.addEventListener("play",function(){t.audioTrackPlaying.notify()}),this.audio.addEventListener("playing",function(){t.audioTrackPlaying.notify()}),this.audio.addEventListener("ended",function(){t.audioTrackEnded.notify()}),this.audio.addEventListener("error",function(){t.canPause=!0,t.audioTrackError.notify()}),this.audio.addEventListener("durationchange",function(){t.durationChanged.notify()}),this.audio.addEventListener("timeupdate",function(){t.durationChanged.notify()}),this.audio.addEventListener("volumechange",function(){t.volumeChanged.notify()})},WMPlayer.prototype._Model.prototype={getPlaylist:function(){return this.playlist},getCurrentTrackIndex:function(){return this.currentTrackIndex},getCurrentTrackTitle:function(){return null===this.currentTrackIndex?"":this.playlist[this.currentTrackIndex].title},getCurrentTrackDuration:function(){if(null===this.currentTrackIndex)return 0;var t=this.playlist[this.currentTrackIndex].duration;return isNaN(t)?0:t},getCurrentTime:function(){return"audio"==this.playlist[this.currentTrackIndex].type?this.audio.currentTime:this.YTReady?this.YTIframe.getCurrentTime():0},getVolume:function(){return this.volume},getMute:function(){return this.mute},getAutoplay:function(){return this.autoplay},getLoop:function(){return this.loop},isPlaying:function(){return"audio"==this.playlist[this.currentTrackIndex].type?!this.audio.paused:!(!this.YTReady||1!=this.YTIframe.getPlayerState())},addAudioTrack:function(t,e,s){void 0===e&&(e="N/A"),void 0===s&&(s="N/A");var a="ready",n="audio",r=this.parseYTURL(t);if(r&&(t=r,n="yt",a="ready"),"N/A"!==s)if("number"==typeof s&&isFinite(s)&&Math.floor(s)===s);else if(/^[0-9:]+$/.test(s)){var o=s.split(":");s=3===o.length?60*+o[0]*60+60*+o[1]+ +o[2]:2===o.length?60*+o[0]+ +o[1]:1===o.length?+o[0]:"N/A"}else s="N/A";this.playlist.push({title:e,url:t,duration:s,type:n,status:a}),this.audioTrackAdded.notify();var l=this,u=this.playlist.length-1;if("audio"==n&&"N/A"===s){var d=new Audio;d.onloadedmetadata=function(t){var e="";if(0!=l.playlist.length)for(i=0;i<l.playlist.length;i++)if(e=l.playlist[i].url.replace("../",""),(0<=t.target.src.indexOf(e)||0<=t.target.src.indexOf(encodeURI(e)))&&"N/A"==l.playlist[i].duration){l.playlist[i].duration=d.duration,l.audioTrackAdded.notify();break}},d.src=l.playlist[u].url,d.load()}else if("yt"==l.playlist[u].type&&("N/A"===s||"N/A"===e||!e)){if(!l.YTApiKey)return console.log("YouTube API Key not found."),void(null===l.currentTrackIndex&&l.setAudioTrack());var c="https://www.googleapis.com/youtube/v3/videos?key="+l.YTApiKey+"&part=snippet,contentDetails&fields=kind,pageInfo,items(id,snippet(title),contentDetails(duration))&id="+l.playlist[u].url,h=new XMLHttpRequest;if("withCredentials"in h)h.open("GET",c,!0);else if(void 0!==typeof XDomainRequest)try{(h=new XDomainRequest).open("GET",c)}catch(t){h=!1,console.log("Error: "+t.message)}else h=!1,console.log("Error: CORS not supported");h&&(h.onload=function(){var t=JSON.parse(h.responseText);if("youtube#videoListResponse"==t.kind&&0<t.pageInfo.totalResults){var e=t.items[0],i=0;if(0==l.playlist.length)return;for(size=l.playlist.length;i<size;i++)0<=e.id.indexOf(l.playlist[i].url)&&("N/A"==l.playlist[i].duration&&(duration=l.convertYTDuration(e.contentDetails.duration),duration&&(l.playlist[i].duration=duration)),"N/A"!=l.playlist[i].title&&l.playlist[i].title||(l.playlist[i].title=e.snippet.title),l.audioTrackAdded.notify())}},h.onerror=function(){console.log("Error: Unable to retrieve data from You Tube")},h.send())}null===l.currentTrackIndex&&l.setAudioTrack()},delAudioTrack:function(t){if(0!=this.playlist.length){if(void 0===t&&(t=this.playlist.length-1),this.playlist.splice(t,1),t==this.currentTrackIndex){var e=this.isPlaying();this.stop(),0==this.playlist.length?this.setAudioTrack():this.currentTrackIndex>=this.playlist.length?this.setAudioTrack(t-1):this.setAudioTrack(t),e&&this.play()}else t<this.currentTrackIndex&&this.currentTrackIndex--;this.audioTrackRemoved.notify()}},setAudioTrack:function(t){var e=this;if(this.YTQuene=!1,clearInterval(this.YTCTInterval),void 0===t&&(t=0),null!==this.currentTrackIndex&&("audio"==this.playlist[this.currentTrackIndex].type?this.audio.pause():"yt"==this.playlist[this.currentTrackIndex].type&&this.YTReady&&this.YTIframe.pauseVideo(),this.audioTrackPaused.notify()),this.playlist.length>t&&0<=t)if(this.canPause)"audio"==this.playlist[t].type?(this.audio.src=this.playlist[t].url,this.audio.load()):"yt"==this.playlist[t].type&&(this.YTIframe?this.YTIframe.loadVideoById({videoId:this.playlist[t].url,startSeconds:0,volume:this.volume,suggestedQuality:"small"}):this.initYTIframe(this.playlist[t].url),this.YTCTInterval=setInterval(function(){e.durationChanged.notify()},100)),this.currentTrackIndex=t,this.currentTrackChanged.notify();else var i=setInterval(function(){(e.canPause||"error"==e.playlist[e.currentTrackIndex].status)&&(e.canPause=!0,"audio"==e.playlist[t].type?(e.audio.src=e.playlist[t].url,e.audio.load()):(e.YTIframe?e.YTIframe.loadVideoById({videoId:e.playlist[t].url,startSeconds:0,suggestedQuality:"small"}):e.initYTIframe(e.playlist[t].url),e.YTCTInterval=setInterval(function(){e.durationChanged.notify()},100)),e.currentTrackIndex=t,e.currentTrackChanged.notify(),clearInterval(i))},10);else this.currentTrackIndex=null},setVolume:function(t){void 0===t&&(t=1),t<0?t=0:1<t&&(t=1),this.volume=t,this.mute=!1,this.audio.volume=this.volume,this.YTIframe&&(this.YTIframe.setVolume(100*t),this.YTIframe.unMute())},setMute:function(t){this.mute=void 0===t?!this.mute:!!t,this.mute?(this.audio.volume=0,this.YTIframe&&this.YTIframe.mute()):(this.audio.volume=this.volume,this.YTIframe&&this.YTIframe.unMute())},setAutoplay:function(t){this.autoplay=void 0===t?!this.autoplay:!!t},setLoop:function(t){this.loop=void 0===t?!this.loop:!!t},setCurrentTrackError:function(){this.playlist[this.currentTrackIndex].status="error"},play:function(){if((self=this).canPause=!1,0!=this.playlist.length&&(null===this.currentTrackIndex&&this.setAudioTrack(),null!==this.currentTrackIndex)){if("audio"==this.playlist[this.currentTrackIndex].type){var t=this.audio.play();if(void 0!==t&&"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]"))try{t.then(function(){self.canPause=!0}).catch(function(){self.canPause=!0})}catch(t){self.canPause=!0}else this.canPause=!0}else"yt"==this.playlist[this.currentTrackIndex].type&&(this.YTReady?(this.YTIframe.playVideo(),this.canPause=!0,this.audioTrackPlaying.notify(),"N/A"==this.playlist[this.currentTrackIndex].duration&&(this.playlist[this.currentTrackIndex].duration=this.YTIframe.getDuration(),self.playlist[this.currentTrackIndex].status="ready",this.durationChanged.notify(),this.currentTrackChanged.notify())):this.YTQuene="play");this.playing=!0}},pause:function(){"audio"==this.playlist[this.currentTrackIndex].type?this.audio.pause():this.YTReady?this.YTIframe.pauseVideo():this.YTQuene="pause",this.audioTrackPaused.notify(),this.playing=!1},stop:function(){if("audio"==this.playlist[this.currentTrackIndex].type){if(this.audio.src){this.audio.pause();try{this.audio.currentTime=0}catch(t){}this.audioTrackStopped.notify()}}else this.YTReady?(this.YTIframe.pauseVideo(),this.YTIframe.seekTo(0),this.audioTrackStopped.notify()):this.YTQuene="stop";this.playing=!1},nextTrack:function(){var t=!1;return this.currentTrackIndex<this.playlist.length-1?this.setAudioTrack(this.currentTrackIndex+1):(this.setAudioTrack(),t=!0),this.currentTrackChanged.notify(),t},previousTrack:function(){0<this.currentTrackIndex?this.setAudioTrack(this.currentTrackIndex-1):this.setAudioTrack(),this.currentTrackChanged.notify()},setTime:function(t){"audio"==this.playlist[this.currentTrackIndex].type?this.audio.src&&(this.audio.currentTime=t):this.YTReady&&this.YTIframe.seekTo(t)},fastForward:function(){var t=this.getCurrentTime()+this.timeChangeRate;"audio"==this.playlist[this.currentTrackIndex].type?t<this.audio.duration&&0<=t&&this.audio.buffered.start(0)<=t&&this.audio.buffered.end(0)>=t&&(this.audio.currentTime=t):this.YTReady&&t<this.YTIframe.getDuration()&&0<=t&&this.YTIframe.seekTo(t)},rewind:function(){var t=this.getCurrentTime()-this.timeChangeRate;"audio"==this.playlist[this.currentTrackIndex].type?t<this.audio.duration&&0<=t&&this.audio.buffered.start(0)<=t&&this.audio.buffered.end(0)>=t&&(this.audio.currentTime=t):this.YTReady&&this.YTIframe.seekTo(t)},setYTApiKey:function(t){this.YTApiKey=t},parseYTURL:function(t){var e=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!e||11!=e[7].length)&&e[7]},convertYTDuration:function(t){var e=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,i=0,s=0,a=0,n=!1;if(e.test(t)){var r=e.exec(t);r[1]&&(i=Number(r[1])),r[2]&&(s=Number(r[2])),r[3]&&(a=Number(r[3])),n=3600*i+60*s+a}return n},initYTIframe:function(t){if(!this.YTIframe){if(0==document.querySelectorAll('script[src="https://www.youtube.com/iframe_api"]').length){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}var s=this,a=setInterval(function(){s.YTIframe?clearInterval(a):"undefined"!=typeof YT&&YT.loaded&&(s.YTIframe=new YT.Player(s.YTIframeId,{videoId:t,playerVars:{autoplay:0,controls:0},events:{onReady:function(t){if(s.YTReady=!0,t.target.setVolume(100*s.volume),s.mute&&t.target.mute(),s.YTQuene){switch(s.YTQuene){case"play":s.play();break;case"pause":s.pause();break;case"stop":s.stop()}s.YTquene=!1}},onStateChange:function(t){s.YTState=s.YTIframe.getPlayerState(),0===s.YTState&&s.audioTrackEnded.notify()},onError:function(){s.audioTrackError.notify()}}}),clearInterval(a))},10)}}},WMPlayer.prototype._View=function(t){var c=this,e=WMPlayer.prototype._Event;this.elements=t,this.template=null,this.playlistPattern="",this.playerClass="default",this.playlistDoubleClickSelect=!1,this.container=this.elements.container,this.mousedownFlag=!1,this.showPlaylist=!0,this.dragged=!1,this.mouseOnVolumeBar=!1,this.mouseOnProgressBar=!1,void 0!==this.elements.playlistDoubleClickSelect&&(this.playlistDoubleClickSelect=this.elements.playlistDoubleClickSelect),this.playButtonClicked=new e(this),this.stopButtonClicked=new e(this),this.fastForwardButtonPressed=new e(this),this.rewindButtonPressed=new e(this),this.progressBarClicked=new e(this),this.volumeBarClicked=new e(this),this.muteButtonClicked=new e(this),this.playlistElementClicked=new e(this),this.playlistElementDoubleClicked=new e(this),this.templateModified=new e(this),this.playlistPatternModified=new e(this),this.container.addEventListener("click",function(t){var e=c.getParentsNodes(t.target,c.elements.container);if(!c.playlistDoubleClickSelect){var i=c.isParent(e,"wmp-playlist-item");if(i){for(var s=0;null!==(i=i.previousSibling);)++s;c.playlistElementDoubleClicked.notify({trackId:s})}}c.isParent(e,c.elements.playButton)&&c.playButtonClicked.notify(),c.isParent(e,c.elements.stopButton)&&c.stopButtonClicked.notify();var a=c.isParent(e,c.elements.progressBar,!0);if(a){var n=a.parentNode,r=0,o=a.getBoundingClientRect(),l=t.clientX-o.left;r=n.hasAttribute("width")?n.getAttribute("width"):n.offsetWidth,c.progressBarClicked.notify({offsetX:l,width:r})}var u=c.isParent(e,c.elements.volumeBar,!0);if(u){var d=u.parentNode;r=0,o=u.getBoundingClientRect(),l=t.clientX-o.left;r=d.hasAttribute("width")?d.getAttribute("width"):d.offsetWidth,c.volumeBarClicked.notify({offsetX:l,width:r})}c.isParent(e,c.elements.muteButton)&&c.muteButtonClicked.notify()});var i=function(t){if(c.playlistDoubleClickSelect){var e=c.getParentsNodes(t.target,c.elements.container),i=c.isParent(e,"wmp-playlist-item");if(i){for(var s=0;null!==(i=i.previousSibling);)++s;c.playlistElementDoubleClicked.notify({trackId:s})}}},s=function(t){if(1==t.which||void 0!==t.touches){var e=c.getParentsNodes(t.target,c.elements.container),i=c.isParent(e,c.elements.volumeBar,!0);if(i&&c.mouseOnVolumeBar){var s=i.parentNode,a=0,n=i.getBoundingClientRect(),r=(t.clientX||t.touches[0].clientX)-n.left;a=s.hasAttribute("width")?s.getAttribute("width"):s.offsetWidth,c.volumeBarClicked.notify({offsetX:r,width:a})}var o=c.isParent(e,c.elements.progressBar,!0);if(o&&c.mouseOnProgressBar){var l=o.parentNode;a=0,n=o.getBoundingClientRect(),r=(t.clientX||t.touches[0].clientX)-n.left;a=l.hasAttribute("width")?l.getAttribute("width"):l.offsetWidth,c.progressBarClicked.notify({offsetX:r,width:a})}}};this.container.addEventListener("dblclick",function(t){i(t)}),this.container.addEventListener("touchstart",function(t){!function(t){c.mouseOnVolumeBar=!1,c.mouseOnProgressBar=!1,c.dragged=!1;var e=c.getParentsNodes(t.target,c.elements.container);c.isParent(e,c.elements.volumeBar,!0)&&(c.mouseOnVolumeBar=!0),c.isParent(e,c.elements.progressBar,!0)&&(c.mouseOnProgressBar=!0)}(t)}),this.container.addEventListener("touchmove",function(t){this.dragged=!0,s(t)}),this.container.addEventListener("touchend",function(t){this.dragged||i(t),this.dragged=!1}),this.container.addEventListener("mousedown",function(t){!function(t){c.mouseOnVolumeBar=!1,c.mouseOnProgressBar=!1;var e=c.getParentsNodes(t.target,c.elements.container);c.isParent(e,c.elements.fastForwardButton)&&(c.mousedownFlag=!0,c.fastForwardButtonPressed.notify()),c.isParent(e,c.elements.rewindButton)&&(c.mousedownFlag=!0,c.rewindButtonPressed.notify()),c.isParent(e,c.elements.volumeBar,!0)&&(c.mouseOnVolumeBar=!0),c.isParent(e,c.elements.progressBar,!0)&&(c.mouseOnProgressBar=!0)}(t)}),this.container.addEventListener("mouseup",function(t){c.mousedownFlag=!1,c.mouseOnVolumeBar=!1,c.mouseOnProgressBar=!1}),this.container.addEventListener("mousemove",function(t){s(t)})},WMPlayer.prototype._View.prototype={renderPlayer:function(){null!==this.template&&(this.elements.container.getElementsByClassName("wmplayer-body")[0].innerHTML=this.template)},renderPlaylist:function(t,e){var i="",s="",a=this.elements.container.getElementsByClassName(this.elements.playlist);if(this.showPlaylist&&0<a.length)for(var n=0;n<t.length;n++)s="wmp-playlist-item",n==e&&(s+=" wmp-current"),"error"==t[n].status&&(s+=" wmp-error"),i+=this.playlistPattern.replace("$index",n+1).replace("$title",t[n].title).replace("$duration",this.formatTime(t[n].duration)).replace("$status",s);for(n=0;a.length>n;n++)a[n].innerHTML=i},setTemplate:function(t){1===t.nodeType?this.template=t.innerHTML:this.template=t,this.templateModified.notify()},setPlaylistPattern:function(t){this.playlistPattern=t,this.playlistPatternModified.notify()},setShowPlaylist:function(t){this.showPlaylist=void 0===t?!this.showPlaylist:1==t,this.playlistPatternModified.notify()},setVolumeBar:function(t){void 0===t&&(t=0);for(var e=this.elements.container.getElementsByClassName(this.elements.volumeBar),i=0;i<e.length;i++)e[i].style.width=100*t+"%"},setProgressBar:function(t,e){var i=0,s=this.elements.container.getElementsByClassName(this.elements.progressBar);void 0!==t&&void 0!==e&&(i=t/e*100);for(var a=0;a<s.length;a++)s[a].style.width=i+"%"},formatTime:function(t){var e="N/A";if(!isNaN(t)){var i=Math.floor(t/60),s=Math.floor(t-60*i);e=i+":"+(s<10?"0":"")+s}return e},setCurrentTime:function(t){for(var e=this.elements.container.getElementsByClassName(this.elements.currentTrackTime),i=this.formatTime(t),s=0;s<e.length;s++)e[s].innerHTML=i},getParentsNodes:function(t,e){var i=[],s=t;for(i.push(s);s.parentNode&&s!=e;)i.unshift(s.parentNode),s=s.parentNode;return i},isParent:function(t,e,i){if(1<t.length){for(var s=0;s<t.length;s++)if(void 0!==t[s].classList){if(t[s].classList.contains(e)||-1<(" "+t[s].getAttribute("class")+" ").indexOf(" "+e+" "))return t[s]}else if(-1<(" "+t[s].getAttribute("class")+" ").indexOf(" "+e+" "))return t[s]}else if(t.classList.contains(e)||-1<(" "+t.className+" ").indexOf(" "+e+" "))return t;if(i){var a=this.container.getElementsByClassName(e);for(s=0;s<a.length;s++)if(a[s].parentNode===t[t.length-1])return a[s]}return!1},setCurrentTrackData:function(t,e){for(var i=this.elements.container.getElementsByClassName(this.elements.currentTrackTitle),s=this.elements.container.getElementsByClassName(this.elements.currentTrackDuration),a=0;a<i.length;a++)null!==i[a]&&(i[a].innerHTML=t);var n=this.formatTime(e);for(a=0;a<s.length;a++)null!==s[a]&&(s[a].innerHTML=n)},addContainerClass:function(t){var e=this,i=t.split(" ");if(void 0!==this.elements.container.classList)i.forEach(function(t){e.elements.container.classList.add(t)});else{var s=" "+this.elements.container.className+" ";i.forEach(function(t){-1==s.indexOf(" "+t+" ")&&(e.elements.container.className+=" "+t)})}},removeContainerClass:function(t){var i=this,e=t.split(" ");if(void 0!==this.elements.container.classList)e.forEach(function(t){i.elements.container.classList.remove(t)});else{var s=" "+this.elements.container.className+" ";e.forEach(function(t){var e=new RegExp(" "+t+" ","g");s=s.replace(e," "),i.elements.container.className=s.trim()})}},setPlayerClass:function(t){this.removeContainerClass(this.playerClass),this.addContainerClass(t),this.playerClass=t},setControls:function(t){void 0!==t.playlist&&(this.elements.playlist=t.playlist),void 0!==t.playButton&&(this.elements.playButton=t.playButton),void 0!==t.stopButton&&(this.elements.stopButton=t.stopButton),void 0!==t.fastForwardButton&&(this.elements.fastForwardButton=t.fastForwardButton),void 0!==t.rewindButton&&(this.elements.rewindButton=t.rewindButton),void 0!==t.progressBar&&(this.elements.progressBar=t.progressBar),void 0!==t.volumeBar&&(this.elements.volumeBar=t.volumeBar),void 0!==t.muteButton&&(this.elements.muteButton=t.muteButton),void 0!==t.currentTrackTime&&(this.elements.currentTrackTime=t.currentTrackTime),void 0!==t.currentTrackDuration&&(this.elements.currentTrackDuration=t.currentTrackDuration),void 0!==t.currentTrackTitle&&(this.elements.currentTrackTitle=t.currentTrackTitle)}};
