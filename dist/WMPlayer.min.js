/*!
* WMPlayer v1.0.0
* Copyright 2016-2024 Marcin Walczak
*This file is part of WMPlayer which is released under MIT license.
*See LICENSE for full license details.
*/ function WMPlayer(t){var e,s=this;this.currentScript=document.currentScript||(e=document.getElementsByTagName("script"))[e.length-1],this.parentNode=(this.currentScript[this.currentScript.length-1]||this.currentScript).parentNode,this.container=document.createElement("div"),void 0!==this.container.classList?(this.container.classList.add("wmplayer"),this.container.classList.add("default")):this.container.className+=" wmplayer default";var a=document.createElement("div");void 0!==a.classList?a.classList.add("wmplayer-body"):a.className+=" wmplayer-body",this.container.appendChild(a);var n=document.createElement("div");n.className+="wmplayer-media",this.container.appendChild(n);var r=document.createElement("div");if(r.className+="wmplayer-yt",n.appendChild(r),n.setAttribute("style","width: 0; height: 0; overflow: hidden; opacity: 0;"),0==document.querySelectorAll('script[src="https://www.youtube.com/iframe_api"]').length){var r=document.createElement("script");r.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}var l=!1;return void 0!==t&&void 0!==t.playlistDoubleClickSelect&&(l=t.playlistDoubleClickSelect),this.started=!1,this.model=new this._Model,this.view=new this._View({playlist:"wmp-playlist",playButton:"wmp-play",stopButton:"wmp-stop",fastForwardButton:"wmp-fast-forward",rewindButton:"wmp-rewind",progressBar:"wmp-progress-bar",volumeBar:"wmp-volume-bar",muteButton:"wmp-mute",currentTrackTime:"wmp-current-track-time",currentTrackDuration:"wmp-current-track-duration",currentTrackTitle:"wmp-current-track-title",container:this.container,playlistDoubleClickSelect:l}),this.view.setTemplate('<div class="wmp-panel"><div class="wmp-current-track"><span class="wmp-current-track-title"></span><span class="wmp-timer"><span class="wmp-current-track-time">0:00</span><span class="wmp-current-track-duration">N/A</span></span></div><div class="wmp-controls"><div class="wmp-play wmp-button"><svg class="wmp-button-play" width="18" height="18"><polygon class="wmp-symbol-play" points="2,2 16,9 2,16"/><g class="wmp-symbol-pause"><rect x="2" y="2" width="4" height="14" /><rect x="11" y="2" width="4" height="14" /><rect x="2" y="2" width="14" height="14" fill="transparent" stroke="transparent"/></g></svg></div><div class="wmp-stop wmp-button"><svg class="wmp-button-stop" width="18" height="18"><rect class="wmp-symbol-stop" x="2" y="2" width="14" height="14"/></svg></div><div class="wmp-rewind wmp-button"><svg class="wmp-button-rewind" width="18" height="18"><polygon class="wmp-symbol-rewind" points="2,9 9,2 9,9 16,2 16,16 9,9 9,16"/></svg></div><div class="wmp-fast-forward wmp-button"><svg class="wmp-button-fast-forward" width="18" height="18"><polygon class="wmp-symbol-fast-forward" points="2,2 9,9 9,2 16,9 9,16 9,8 2,16"/></svg></div></div><div class="wmp-volume-bar-container"><div class="wmp-button wmp-mute"><svg width="18" height="18"><g class="wmp-button-volume"><polygon points="2,6 5,6 10,2 10,16 5,12 2,12 " /><g class="wmp-symbol-muted"><path d="M12,4 Q18,9 12,14" fill="transparent" /><path d="M12,7 Q14,9 12,11" fill="transparent" /></g></g></svg></div><div class="wmp-volume-bar"></div></div><div class="wmp-progress-bar-container"><div class="wmp-progress-bar"></div></div></div><div class="wmp-playlist-container"><div class="wmp-playlist"></div><div class="wmp-footer">Powered by: <a href="https://wiserim.github.io/WMPlayer" target="_blank" rel="noopener noreferrer">WMPlayer</a></div></div>'),this.view.setPlaylistPattern('<div class="$status"><span>$index.</span><span>$title</span><span>$duration</span></div>'),void 0!==t&&("string"==typeof t||t instanceof String||void 0!==t.nodeType&&1===t.nodeType||window.jQuery&&t instanceof jQuery?this.parent(t):(void 0!==t.parent&&this.parent(t.parent,t.parentAsTemplate),void 0!==t.template&&this.template(t.template),void 0!==t.theme&&this.theme(t.theme),void 0!==t.playlistPattern&&this.playlistPattern(t.playlistPattern),void 0!==t.controls&&this.controls(t.controls),void 0!==t.autoplay&&this.autoplay(t.autoplay),void 0!==t.loop&&this.loop(t.loop),void 0!==t.volume&&this.volume(t.volume),void 0!==t.mute&&this.mute(t.mute),void 0!==t.YTApiKey&&this.model.setYTApiKey(t.YTApiKey),void 0!==t.playlist&&t.playlist.forEach(function(t){s.addTrack(t.url,t.title,t.duration)}),void 0!==t.showPlaylist&&this.showPlaylist(t.showPlaylist),!1!==t.start&&this.start())),this.model.audioTrackAdded.attach(function(){if(s.started){var t=s.model.getPlaylist(),e=s.model.getCurrentTrackIndex(),a=s.model.getCurrentTrackTitle(),n=s.model.getCurrentTrackDuration();s.view.renderPlaylist(t,e),s.view.setCurrentTrackData(a,n)}}),this.model.audioTrackRemoved.attach(function(){if(s.started){var t=s.model.getPlaylist(),e=s.model.getCurrentTrackIndex();s.view.renderPlaylist(t,e)}}),this.model.currentTrackChanged.attach(function(){if(s.started){var t=s.model.getPlaylist(),e=s.model.getCurrentTrackIndex(),a=s.model.getCurrentTrackTitle(),n=s.model.getCurrentTrackDuration();s.view.renderPlaylist(t,e),s.view.setCurrentTrackData(a,n)}}),this.model.volumeChanged.attach(function(){s.started&&(s.view.setVolumeBar(s.model.getVolume()),s.model.getMute()?s.view.addContainerClass("muted"):s.view.removeContainerClass("muted"))}),this.model.audioTrackPlaying.attach(function(){s.view.removeContainerClass("paused"),s.view.addContainerClass("playing")}),this.model.audioTrackPaused.attach(function(){s.view.removeContainerClass("playing"),s.view.addContainerClass("paused")}),this.model.audioTrackStopped.attach(function(){s.view.removeContainerClass("playing"),s.view.removeContainerClass("paused")}),this.model.audioTrackEnded.attach(function(){s.model.nextTrack()&&!s.loop?s.model.stop():s.model.play()}),this.model.durationChanged.attach(function(){var t=s.model.getCurrentTime(),e=s.model.getCurrentTrackDuration();s.view.setProgressBar(t,e),s.view.setCurrentTime(t)}),this.model.audioTrackError.attach(function(){s.model.setCurrentTrackError(),s.nextTrack()}),this.view.playButtonClicked.attach(function(){s.model.playing?s.model.pause():s.model.play()}),this.view.stopButtonClicked.attach(function(){s.model.stop()}),this.view.fastForwardButtonPressed.attach(function(){setTimeout(function(){s.view.mousedownFlag?s.mouseDown=setInterval(function(){s.view.mousedownFlag?s.model.fastForward():(clearInterval(s.mouseDown),s.mouseDown=-1)},500):s.nextTrack()},200)}),this.view.rewindButtonPressed.attach(function(){setTimeout(function(){s.view.mousedownFlag?s.mouseDown=setInterval(function(){s.view.mousedownFlag?s.model.rewind():(clearInterval(s.mouseDown),s.mouseDown=-1)},500):s.previousTrack()},200)}),this.view.progressBarClicked.attach(function(t,e){var a=s.model.getCurrentTrackDuration(),n=Math.floor(e.offsetX/e.width*a);s.model.setTime(n)}),this.view.volumeBarClicked.attach(function(t,e){var a=e.offsetX/e.width;s.model.setVolume(a)}),this.view.muteButtonClicked.attach(function(t,e){s.model.setMute()}),this.view.playlistElementDoubleClicked.attach(function(t,e){s.model.setAudioTrack(e.trackId),s.model.play()}),this.view.templateModified.attach(function(){if(s.started){var t=s.model.getCurrentTrackTitle(),e=s.model.getCurrentTrackDuration(),a=s.model.getPlaylist(),n=s.model.getCurrentTrackIndex();s.view.renderPlayer(),s.view.setCurrentTrackData(t,e),s.view.renderPlaylist(a,n)}}),this.view.playlistPatternModified.attach(function(){if(s.started){var t=s.model.getPlaylist(),e=s.model.getCurrentTrackIndex();s.view.renderPlaylist(t,e)}}),this}window.jQuery&&($.fn.WMPlayer=function(t){var e=$.makeArray(arguments),s=e.slice(1);return this.each(function(){var e=$.data(this,"wmplayer");if(e){if(e[t]){if(e[t].apply(e,s),"parent"==t&&t.length>0){var a=s[0];a.length>0&&(a=a[0]),$.removeData(this,"wmplayer"),void 0!==$.data(a,"wmplayer")&&$.data(a,"wmplayer").destroy(),$.data(a,"wmplayer",e)}}else $.error("Method "+t+" does not exist on WMPlayer")}else if("string"!=typeof t){var n=t;void 0===n?n={parent:this}:void 0===n.parent&&(n.parent=this);var r=new WMPlayer(n);return $.data(this,"wmplayer",r),r}})}),WMPlayer.prototype={addTrack:function(t,e,s){return void 0===e&&(e="N/A"),void 0===s&&(s="N/A"),this.model.addAudioTrack(t,e,s),this},removeTrack:function(t){return this.model.delAudioTrack(t),this},track:function(t){return void 0===t&&(t=0),this.model.setAudioTrack(t),this.started&&this.model.play(),this},nextTrack:function(){return this.model.nextTrack()&&!this.model.getLoop()?this.model.stop():this.model.playing&&this.model.play(),this},previousTrack:function(){return this.model.previousTrack(),this.model.playing&&this.model.play(),this},volume:function(t){return this.model.setVolume(t),this},mute:function(t){return this.model.setMute(t),this},template:function(t){return void 0===t&&(t=!1),t.length>0&&(t=t[0]),this.view.setTemplate(t),this},playlistPattern:function(t){return void 0!==t&&this.view.setPlaylistPattern(t),this},parent:function(t,e){if(void 0===t){var s;t=(document.currentScript||(s=document.getElementsByTagName("script"))[s.length-1]).parentNode}return(("string"==typeof t||t instanceof String)&&(t=document.querySelector(t)),null===t)?(console.log("DOM element not found."),this):(t.length>0&&(t=t[0]),this.parentNode=t,!0==e&&(this.view.setTemplate(t.innerHTML),t.innerHTML=""),this.started&&this.parentNode.appendChild(this.container),this)},loop:function(t){return this.model.setLoop(t),this},autoplay:function(t){return this.model.setAutoplay(t),this},controls:function(t){return this.view.setControls(t),this},showPlaylist:function(t){return this.view.setShowPlaylist(t),this},theme:function(t){return this.view.setPlayerClass(t),this},destroy:function(){return this.container.parentNode==this.parentNode&&this.parentNode.removeChild(this.container),this.started=!1,this},start:function(){if(!this.started){this.started=!0,this.parentNode.appendChild(this.container);var t=this.container.querySelector(".wmplayer-media");t.appendChild(this.model.audio);var e=t.querySelector(".wmplayer-yt");e.id="wmplayer-yt-"+document.querySelectorAll(".wmplayer .wmplayer-yt").length,this.model.YTIframeId=e.id;var s=this.model.getCurrentTrackTitle(),a=this.model.getCurrentTrackDuration(),n=this.model.getPlaylist(),r=this.model.getCurrentTrackIndex(),o=this.model.getVolume(),l=this.model.getMute(),u=this.model.getAutoplay();this.view.renderPlayer(),this.view.setProgressBar(),this.view.setVolumeBar(o),l&&this.view.addContainerClass("muted"),this.view.setCurrentTrackData(s,a),this.view.renderPlaylist(n,r),u?this.model.play():this.view.addContainerClass("paused")}return this}},WMPlayer.prototype._Event=function(t){this.sender=t,this.listeners=[]},WMPlayer.prototype._Event.prototype={attach:function(t){this.listeners.push(t)},notify:function(t){for(var e=0;e<this.listeners.length;e++)this.listeners[e](this.sender,t)}},WMPlayer.prototype._Model=function(){var t=this,e=WMPlayer.prototype._Event;this.audio=new Audio,this.YTApiKey="",this.YTIframeId="",this.YTIframe=!1,this.playlist=[],this.currentTrackIndex=null,this.currentTrackType="",this.loop=!1,this.autoplay=!1,this.timeChangeRate=5,this.volume=1,this.mute=!1,this.canPause=!0,this.playing=!1,this.YTReady=!1,this.YTState=-1,this.YTQuene=!1,this.YTCTInterval=-1,this.audioTrackAdded=new e(this),this.audioTrackRemoved=new e(this),this.currentTrackChanged=new e(this),this.audioTrackPlaying=new e(this),this.audioTrackPaused=new e(this),this.audioTrackStopped=new e(this),this.audioTrackEnded=new e(this),this.audioTrackError=new e(this),this.durationChanged=new e(this),this.volumeChanged=new e(this),this.volumeChanged=new e(this),this.audio.addEventListener("play",function(){t.audioTrackPlaying.notify()}),this.audio.addEventListener("playing",function(){t.audioTrackPlaying.notify()}),this.audio.addEventListener("ended",function(){t.audioTrackEnded.notify()}),this.audio.addEventListener("error",function(){t.canPause=!0,t.audioTrackError.notify()}),this.audio.addEventListener("durationchange",function(){t.durationChanged.notify()}),this.audio.addEventListener("timeupdate",function(){t.durationChanged.notify()}),this.audio.addEventListener("volumechange",function(){t.volumeChanged.notify()})},WMPlayer.prototype._Model.prototype={getPlaylist:function(){return this.playlist},getCurrentTrackIndex:function(){return this.currentTrackIndex},getCurrentTrackTitle:function(){return null===this.currentTrackIndex?"":this.playlist[this.currentTrackIndex].title},getCurrentTrackDuration:function(){if(null===this.currentTrackIndex)return 0;var t=this.playlist[this.currentTrackIndex].duration;return isNaN(t)?0:t},getCurrentTime:function(){return"audio"==this.playlist[this.currentTrackIndex].type?this.audio.currentTime:this.YTReady?this.YTIframe.getCurrentTime():0},getVolume:function(){return this.volume},getMute:function(){return this.mute},getAutoplay:function(){return this.autoplay},getLoop:function(){return this.loop},isPlaying:function(){return"audio"==this.playlist[this.currentTrackIndex].type?!this.audio.paused:!!this.YTReady&&1==this.YTIframe.getPlayerState()},addAudioTrack:function(t,e,s){void 0===e&&(e="N/A"),void 0===s&&(s="N/A");var a="ready",n="audio",r=this.parseYTURL(t);if(r&&(t=r,n="yt",a="ready"),"N/A"!==s){if("number"==typeof s&&isFinite(s)&&Math.floor(s)===s);else if(/^[0-9:]+$/.test(s)){var o=s.split(":");s=3===o.length?3600*+o[0]+60*+o[1]+ +o[2]:2===o.length?60*+o[0]+ +o[1]:1===o.length?+o[0]:"N/A"}else s="N/A"}this.playlist.push({title:e,url:t,duration:s,type:n,status:a}),this.audioTrackAdded.notify();var l=this,u=this.playlist.length-1;if("audio"==n&&"N/A"===s){var d=new Audio;d.onloadedmetadata=function(t){var e="";if(0!=l.playlist.length){for(i=0;i<l.playlist.length;i++)if(e=l.playlist[i].url.replace("../",""),(t.target.src.indexOf(e)>=0||t.target.src.indexOf(encodeURI(e))>=0)&&"N/A"==l.playlist[i].duration){l.playlist[i].duration=d.duration,l.audioTrackAdded.notify();break}}},d.src=l.playlist[u].url,d.load()}else if("yt"==l.playlist[u].type&&("N/A"===s||"N/A"===e||!e)){if(!l.YTApiKey){console.log("YouTube API Key not found."),null===l.currentTrackIndex&&l.setAudioTrack();return}var h="https://www.googleapis.com/youtube/v3/videos?key="+l.YTApiKey+"&part=snippet,contentDetails&fields=kind,pageInfo,items(id,snippet(title),contentDetails(duration))&id="+l.playlist[u].url,c=new XMLHttpRequest;if("withCredentials"in c)c.open("GET",h,!0);else try{(c=new XDomainRequest).open("GET",h)}catch(p){c=!1,console.log("Error: "+p.message)}c&&(c.onload=function(){var t=JSON.parse(c.responseText);if("youtube#videoListResponse"==t.kind&&t.pageInfo.totalResults>0){var e=t.items[0],s=0;if(0==l.playlist.length)return;for(size=l.playlist.length;s<size;s++)e.id.indexOf(l.playlist[s].url)>=0&&("N/A"==l.playlist[s].duration&&(duration=l.convertYTDuration(e.contentDetails.duration))&&(l.playlist[s].duration=duration),"N/A"!=l.playlist[s].title&&l.playlist[s].title||(l.playlist[s].title=e.snippet.title),l.audioTrackAdded.notify())}},c.onerror=function(){console.log("Error: Unable to retrieve data from You Tube")},c.send())}null===l.currentTrackIndex&&l.setAudioTrack()},delAudioTrack:function(t){if(0!=this.playlist.length){if(void 0===t&&(t=this.playlist.length-1),this.playlist.splice(t,1),t==this.currentTrackIndex){var e=this.isPlaying();this.stop(),0==this.playlist.length?this.setAudioTrack():this.currentTrackIndex>=this.playlist.length?this.setAudioTrack(t-1):this.setAudioTrack(t),e&&this.play()}else t<this.currentTrackIndex&&this.currentTrackIndex--;this.audioTrackRemoved.notify()}},setAudioTrack:function(t){var e=this;if(this.YTQuene=!1,clearInterval(this.YTCTInterval),void 0===t&&(t=0),null!==this.currentTrackIndex&&("audio"==this.playlist[this.currentTrackIndex].type?this.audio.pause():"yt"==this.playlist[this.currentTrackIndex].type&&this.YTReady&&this.YTIframe.pauseVideo(),this.audioTrackPaused.notify()),this.playlist.length>t&&0<=t){if(this.canPause)"audio"==this.playlist[t].type?(this.audio.src=this.playlist[t].url,this.audio.load()):"yt"==this.playlist[t].type&&(this.YTIframe?this.YTIframe.loadVideoById({videoId:this.playlist[t].url,startSeconds:0,volume:this.volume,suggestedQuality:"small"}):this.initYTIframe(this.playlist[t].url),this.YTCTInterval=setInterval(function(){e.durationChanged.notify()},100)),this.currentTrackIndex=t,this.currentTrackChanged.notify();else var s=setInterval(function(){(e.canPause||"error"==e.playlist[e.currentTrackIndex].status)&&(e.canPause=!0,"audio"==e.playlist[t].type?(e.audio.src=e.playlist[t].url,e.audio.load()):(e.YTIframe?e.YTIframe.loadVideoById({videoId:e.playlist[t].url,startSeconds:0,suggestedQuality:"small"}):e.initYTIframe(e.playlist[t].url),e.YTCTInterval=setInterval(function(){e.durationChanged.notify()},100)),e.currentTrackIndex=t,e.currentTrackChanged.notify(),clearInterval(s))},10)}else this.currentTrackIndex=null},setVolume:function(t){void 0===t&&(t=1),t<0?t=0:t>1&&(t=1),this.volume=t,this.mute=!1,this.audio.volume=this.volume,this.YTIframe&&(this.YTIframe.setVolume(100*t),this.YTIframe.unMute())},setMute:function(t){void 0===t?this.mute=!this.mute:t?this.mute=!0:this.mute=!1,this.mute?(this.audio.volume=0,this.YTIframe&&this.YTIframe.mute()):(this.audio.volume=this.volume,this.YTIframe&&this.YTIframe.unMute())},setAutoplay:function(t){void 0===t?this.autoplay=!this.autoplay:t?this.autoplay=!0:this.autoplay=!1},setLoop:function(t){void 0===t?this.loop=!this.loop:t?this.loop=!0:this.loop=!1},setCurrentTrackError:function(){this.playlist[this.currentTrackIndex].status="error"},play:function(){if(self=this,this.canPause=!1,0!=this.playlist.length&&(null===this.currentTrackIndex&&this.setAudioTrack(),null!==this.currentTrackIndex)){if("audio"==this.playlist[this.currentTrackIndex].type){var t=this.audio.play();if(void 0!==t&&"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]"))try{t.then(function(){self.canPause=!0}).catch(function(){self.canPause=!0})}catch(e){self.canPause=!0}else this.canPause=!0}else"yt"==this.playlist[this.currentTrackIndex].type&&(this.YTReady?(this.YTIframe.playVideo(),this.canPause=!0,this.audioTrackPlaying.notify(),"N/A"==this.playlist[this.currentTrackIndex].duration&&(this.playlist[this.currentTrackIndex].duration=this.YTIframe.getDuration(),self.playlist[this.currentTrackIndex].status="ready",this.durationChanged.notify(),this.currentTrackChanged.notify())):this.YTQuene="play");this.playing=!0}},pause:function(){"audio"==this.playlist[this.currentTrackIndex].type?this.audio.pause():this.YTReady?this.YTIframe.pauseVideo():this.YTQuene="pause",this.audioTrackPaused.notify(),this.playing=!1},stop:function(){if("audio"==this.playlist[this.currentTrackIndex].type){if(this.audio.src){this.audio.pause();try{this.audio.currentTime=0}catch(t){}this.audioTrackStopped.notify()}}else this.YTReady?(this.YTIframe.pauseVideo(),this.YTIframe.seekTo(0),this.audioTrackStopped.notify()):this.YTQuene="stop";this.playing=!1},nextTrack:function(){var t=!1;return this.currentTrackIndex<this.playlist.length-1?this.setAudioTrack(this.currentTrackIndex+1):(this.setAudioTrack(),t=!0),this.currentTrackChanged.notify(),t},previousTrack:function(){this.currentTrackIndex>0?this.setAudioTrack(this.currentTrackIndex-1):this.setAudioTrack(),this.currentTrackChanged.notify()},setTime:function(t){"audio"==this.playlist[this.currentTrackIndex].type?this.audio.src&&(this.audio.currentTime=t):this.YTReady&&this.YTIframe.seekTo(t)},fastForward:function(){var t=this.getCurrentTime()+this.timeChangeRate;"audio"==this.playlist[this.currentTrackIndex].type?t<this.audio.duration&&t>=0&&this.audio.buffered.start(0)<=t&&this.audio.buffered.end(0)>=t&&(this.audio.currentTime=t):this.YTReady&&t<this.YTIframe.getDuration()&&t>=0&&this.YTIframe.seekTo(t)},rewind:function(){var t=this.getCurrentTime()-this.timeChangeRate;"audio"==this.playlist[this.currentTrackIndex].type?t<this.audio.duration&&t>=0&&this.audio.buffered.start(0)<=t&&this.audio.buffered.end(0)>=t&&(this.audio.currentTime=t):this.YTReady&&this.YTIframe.seekTo(t)},setYTApiKey:function(t){this.YTApiKey=t},parseYTURL:function(t){var e=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!!e&&11==e[7].length&&e[7]},convertYTDuration:function(t){var e=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,s=0,a=0,n=0,r=!1;if(e.test(t)){var o=e.exec(t);o[1]&&(s=Number(o[1])),o[2]&&(a=Number(o[2])),o[3]&&(n=Number(o[3])),r=3600*s+60*a+n}return r},initYTIframe:function(t){if(!this.YTIframe)var e=this,s=setInterval(function(){e.YTIframe?clearInterval(s):"undefined"!=typeof YT&&YT.loaded&&(e.YTIframe=new YT.Player(e.YTIframeId,{videoId:t,playerVars:{autoplay:0,controls:0},events:{onReady:function(t){if(e.YTReady=!0,t.target.setVolume(100*e.volume),e.mute&&t.target.mute(),e.YTQuene){switch(e.YTQuene){case"play":e.play();break;case"pause":e.pause();break;case"stop":e.stop()}e.YTquene=!1}},onStateChange:function(t){e.YTState=e.YTIframe.getPlayerState(),0===e.YTState&&e.audioTrackEnded.notify()},onError:function(){e.audioTrackError.notify()}}}),clearInterval(s))},10)}},WMPlayer.prototype._View=function(t){var e=this,s=WMPlayer.prototype._Event;this.elements=t,this.template=null,this.playlistPattern="",this.playerClass="default",this.playlistDoubleClickSelect=!1,this.container=this.elements.container,this.mousedownFlag=!1,this.showPlaylist=!0,this.dragged=!1,this.mouseOnVolumeBar=!1,this.mouseOnProgressBar=!1,void 0!==this.elements.playlistDoubleClickSelect&&(this.playlistDoubleClickSelect=this.elements.playlistDoubleClickSelect),this.playButtonClicked=new s(this),this.stopButtonClicked=new s(this),this.fastForwardButtonPressed=new s(this),this.rewindButtonPressed=new s(this),this.progressBarClicked=new s(this),this.volumeBarClicked=new s(this),this.muteButtonClicked=new s(this),this.playlistElementClicked=new s(this),this.playlistElementDoubleClicked=new s(this),this.templateModified=new s(this),this.playlistPatternModified=new s(this),this.container.addEventListener("click",function(t){var s=e.getParentsNodes(t.target,e.elements.container);if(!e.playlistDoubleClickSelect){var a=e.isParent(s,"wmp-playlist-item");if(a){for(var n=0;null!==(a=a.previousSibling);)++n;e.playlistElementDoubleClicked.notify({trackId:n})}}e.isParent(s,e.elements.playButton)&&e.playButtonClicked.notify(),e.isParent(s,e.elements.stopButton)&&e.stopButtonClicked.notify();var r=e.isParent(s,e.elements.progressBar,!0);if(r){var o=r.parentNode,l=0,u=r.getBoundingClientRect(),d=t.clientX-u.left;l=o.hasAttribute("width")?o.getAttribute("width"):o.offsetWidth,e.progressBarClicked.notify({offsetX:d,width:l})}var h=e.isParent(s,e.elements.volumeBar,!0);if(h){var c=h.parentNode,l=0,u=h.getBoundingClientRect(),d=t.clientX-u.left;l=c.hasAttribute("width")?c.getAttribute("width"):c.offsetWidth,e.volumeBarClicked.notify({offsetX:d,width:l})}e.isParent(s,e.elements.muteButton)&&e.muteButtonClicked.notify()});var a=function(t){if(e.playlistDoubleClickSelect){var s=e.getParentsNodes(t.target,e.elements.container),a=e.isParent(s,"wmp-playlist-item");if(a){for(var n=0;null!==(a=a.previousSibling);)++n;e.playlistElementDoubleClicked.notify({trackId:n})}}},n=function(t){e.mouseOnVolumeBar=!1,e.mouseOnProgressBar=!1;var s=e.getParentsNodes(t.target,e.elements.container);e.isParent(s,e.elements.fastForwardButton)&&(e.mousedownFlag=!0,e.fastForwardButtonPressed.notify()),e.isParent(s,e.elements.rewindButton)&&(e.mousedownFlag=!0,e.rewindButtonPressed.notify()),e.isParent(s,e.elements.volumeBar,!0)&&(e.mouseOnVolumeBar=!0),e.isParent(s,e.elements.progressBar,!0)&&(e.mouseOnProgressBar=!0)},r=function(t){e.mouseOnVolumeBar=!1,e.mouseOnProgressBar=!1,e.dragged=!1;var s=e.getParentsNodes(t.target,e.elements.container);e.isParent(s,e.elements.volumeBar,!0)&&(e.mouseOnVolumeBar=!0),e.isParent(s,e.elements.progressBar,!0)&&(e.mouseOnProgressBar=!0)},o=function(t){e.mousedownFlag=!1,e.mouseOnVolumeBar=!1,e.mouseOnProgressBar=!1},l=function(t){if(1==t.which||void 0!==t.touches){var s=e.getParentsNodes(t.target,e.elements.container),a=e.isParent(s,e.elements.volumeBar,!0);if(a&&e.mouseOnVolumeBar){var n=a.parentNode,r=0,o=a.getBoundingClientRect(),l=(t.clientX||t.touches[0].clientX)-o.left;r=n.hasAttribute("width")?n.getAttribute("width"):n.offsetWidth,e.volumeBarClicked.notify({offsetX:l,width:r})}var u=e.isParent(s,e.elements.progressBar,!0);if(u&&e.mouseOnProgressBar){var d=u.parentNode,r=0,o=u.getBoundingClientRect(),l=(t.clientX||t.touches[0].clientX)-o.left;r=d.hasAttribute("width")?d.getAttribute("width"):d.offsetWidth,e.progressBarClicked.notify({offsetX:l,width:r})}}};this.container.addEventListener("dblclick",function(t){a(t)}),this.container.addEventListener("touchstart",function(t){r(t)}),this.container.addEventListener("touchmove",function(t){this.dragged=!0,l(t)}),this.container.addEventListener("touchend",function(t){this.dragged||a(t),this.dragged=!1}),this.container.addEventListener("mousedown",function(t){n(t)}),this.container.addEventListener("mouseup",function(t){o(t)}),this.container.addEventListener("mousemove",function(t){l(t)})},WMPlayer.prototype._View.prototype={renderPlayer:function(){null!==this.template&&(this.elements.container.getElementsByClassName("wmplayer-body")[0].innerHTML=this.template)},renderPlaylist:function(t,e){var s="",a="",n=this.elements.container.getElementsByClassName(this.elements.playlist);if(this.showPlaylist&&n.length>0)for(var r=0;r<t.length;r++)a="wmp-playlist-item",r==e&&(a+=" wmp-current"),"error"==t[r].status&&(a+=" wmp-error"),s+=this.playlistPattern.replace("$index",r+1).replace("$title",t[r].title).replace("$duration",this.formatTime(t[r].duration)).replace("$status",a);for(r=0;n.length>r;r++)n[r].innerHTML=s},setTemplate:function(t){1===t.nodeType?this.template=t.innerHTML:this.template=t,this.templateModified.notify()},setPlaylistPattern:function(t){this.playlistPattern=t,this.playlistPatternModified.notify()},setShowPlaylist:function(t){void 0===t?this.showPlaylist=!this.showPlaylist:!0==t?this.showPlaylist=!0:this.showPlaylist=!1,this.playlistPatternModified.notify()},setVolumeBar:function(t){void 0===t&&(t=0);for(var e=this.elements.container.getElementsByClassName(this.elements.volumeBar),s=0;s<e.length;s++)e[s].style.width=100*t+"%"},setProgressBar:function(t,e){var s=0,a=this.elements.container.getElementsByClassName(this.elements.progressBar);void 0!==t&&void 0!==e&&(s=t/e*100);for(var n=0;n<a.length;n++)a[n].style.width=s+"%"},formatTime:function(t){var e="N/A";if(!isNaN(t)){var s=Math.floor(t/60),a=Math.floor(t-60*s);e=s+":"+(a<10?"0":"")+a}return e},setCurrentTime:function(t){for(var e=this.elements.container.getElementsByClassName(this.elements.currentTrackTime),s=this.formatTime(t),a=0;a<e.length;a++)e[a].innerHTML=s},getParentsNodes:function(t,e){var s=[],a=t;for(s.push(a);a.parentNode&&a!=e;)s.unshift(a.parentNode),a=a.parentNode;return s},isParent:function(t,e,s){if(t.length>1){for(var a=0;a<t.length;a++)if(void 0!==t[a].classList){if(t[a].classList.contains(e)||(" "+t[a].getAttribute("class")+" ").indexOf(" "+e+" ")>-1)return t[a]}else if((" "+t[a].getAttribute("class")+" ").indexOf(" "+e+" ")>-1)return t[a]}else if(t.classList.contains(e)||(" "+t.className+" ").indexOf(" "+e+" ")>-1)return t;if(s){for(var n=this.container.getElementsByClassName(e),a=0;a<n.length;a++)if(n[a].parentNode===t[t.length-1])return n[a]}return!1},setCurrentTrackData:function(t,e){for(var s=this.elements.container.getElementsByClassName(this.elements.currentTrackTitle),a=this.elements.container.getElementsByClassName(this.elements.currentTrackDuration),n=0;n<s.length;n++)null!==s[n]&&(s[n].innerHTML=t);for(var r=this.formatTime(e),n=0;n<a.length;n++)null!==a[n]&&(a[n].innerHTML=r)},addContainerClass:function(t){var e=this,s=t.split(" ");if(void 0!==this.elements.container.classList)s.forEach(function(t){e.elements.container.classList.add(t)});else{var a=" "+this.elements.container.className+" ";s.forEach(function(t){-1==a.indexOf(" "+t+" ")&&(e.elements.container.className+=" "+t)})}},removeContainerClass:function(t){var e=this,s=t.split(" ");if(void 0!==this.elements.container.classList)s.forEach(function(t){e.elements.container.classList.remove(t)});else{var a=" "+this.elements.container.className+" ";s.forEach(function(t){var s=RegExp(" "+t+" ","g");a=a.replace(s," "),e.elements.container.className=a.trim()})}},setPlayerClass:function(t){this.removeContainerClass(this.playerClass),this.addContainerClass(t),this.playerClass=t},setControls:function(t){void 0!==t.playlist&&(this.elements.playlist=t.playlist),void 0!==t.playButton&&(this.elements.playButton=t.playButton),void 0!==t.stopButton&&(this.elements.stopButton=t.stopButton),void 0!==t.fastForwardButton&&(this.elements.fastForwardButton=t.fastForwardButton),void 0!==t.rewindButton&&(this.elements.rewindButton=t.rewindButton),void 0!==t.progressBar&&(this.elements.progressBar=t.progressBar),void 0!==t.volumeBar&&(this.elements.volumeBar=t.volumeBar),void 0!==t.muteButton&&(this.elements.muteButton=t.muteButton),void 0!==t.currentTrackTime&&(this.elements.currentTrackTime=t.currentTrackTime),void 0!==t.currentTrackDuration&&(this.elements.currentTrackDuration=t.currentTrackDuration),void 0!==t.currentTrackTitle&&(this.elements.currentTrackTitle=t.currentTrackTitle)}};
